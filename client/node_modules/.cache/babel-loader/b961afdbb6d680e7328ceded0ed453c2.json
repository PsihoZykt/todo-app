{"ast":null,"code":"import _objectSpread from \"/home/psihoz/todo-app-back/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport TodosAPI from '../api/TodosAPI';\nconst ADD_TASK = 'ADD_TASK';\nconst REMOVE_TASK = 'REMOVE_TASK';\nconst SET_TASKS = 'SET_TASKS';\nconst EDIT_TASK = 'EDIT_TASK';\nconst TOGGLE_IS_ACTIVE = 'TOGGLE_IS_ACTIVE';\nconst initialState = {\n  tasks: []\n};\nexport default ((state = initialState, action) => {\n  switch (action.type) {\n    case SET_TASKS:\n      {\n        return _objectSpread({}, state, {\n          tasks: action.tasks\n        });\n      }\n\n    case ADD_TASK:\n      {\n        return _objectSpread({}, state, {\n          tasks: [...state.tasks, action.task]\n        });\n      }\n\n    case EDIT_TASK:\n      {\n        let newTasks = [...state.tasks];\n        newTasks = newTasks.map(task => {\n          let newTask = _objectSpread({}, task);\n\n          if (newTask.id === action.task.id) {\n            newTask = action.task;\n          }\n\n          return newTask;\n        });\n        return _objectSpread({}, state, {\n          tasks: newTasks\n        });\n      }\n\n    case REMOVE_TASK:\n      {\n        const taskIdx = state.tasks.findIndex(task => task.id === action.task.id);\n        const newTasks = [...state.tasks.filter((elem, idx) => idx !== taskIdx)];\n        return _objectSpread({}, state, {\n          tasks: newTasks\n        });\n      }\n\n    case TOGGLE_IS_ACTIVE:\n      {\n        let newTasks = [...state.tasks];\n        newTasks = newTasks.map(task => {\n          let newTask = _objectSpread({}, task);\n\n          if (newTask.id === action.task.id) {\n            newTask = action.task;\n          } else {\n            newTask.isActive = false;\n          }\n\n          return newTask;\n        });\n        return _objectSpread({}, state, {\n          tasks: newTasks\n        });\n      }\n\n    default:\n      return state;\n  }\n});\nexport const addTask = task => ({\n  type: ADD_TASK,\n  task\n});\nexport const removeTask = task => ({\n  type: REMOVE_TASK,\n  task\n});\nexport const toggleIsActive = task => ({\n  type: TOGGLE_IS_ACTIVE,\n  task\n});\nexport const setTasks = tasks => ({\n  type: SET_TASKS,\n  tasks\n});\nexport const editTask = task => ({\n  type: EDIT_TASK,\n  task\n}); // Thunks\n\nexport const postTask = task => dispatch => {\n  console.log(\"Post task reducer\");\n  TodosAPI.postTodo(task).then(todo => {\n    const newTask = {\n      id: todo.id,\n      name: todo.name,\n      isActive: todo.isActive,\n      subTasks: todo.subTasks\n    };\n    return dispatch(addTask(newTask));\n  }).catch(err => console.log(err));\n};\nexport const getTasks = () => dispatch => {\n  TodosAPI.getAllTodos().then(data => dispatch(setTasks(data))).catch(err => console.log(err));\n};\nexport const deleteTask = task => dispatch => {\n  TodosAPI.deleteTodo(task).then(() => dispatch(removeTask(task))).catch(err => console.log(err));\n};\nexport const toggleTaskActive = task => dispatch => {\n  console.log(\"toggleTaskActive reducer\");\n\n  const newTask = _objectSpread({}, task);\n\n  newTask.isActive = !task.isActive;\n  dispatch(toggleIsActive(newTask)); // // Update all todos, because I need to update isACtive in other todos\n  // TodosAPI.editTask(newTask)\n  //   .then(() => TodosAPI.getAllTodos().then(data => {\n  //     return dispatch(setTasks(data));\n  //   }),\n  //   )\n  //   .catch(err => console.log(err));\n};\nexport const addSubtask = (task, label) => dispatch => {\n  console.log(\"addSubtask reducer\");\n\n  const newTask = _objectSpread({}, task);\n\n  newTask.subTasks = [...task.subTasks];\n  newTask.subTasks.push({\n    label,\n    isChecked: false\n  });\n  return TodosAPI.editTask(newTask).then(data => {\n    return dispatch(editTask(data));\n  });\n};\nexport const toggleSubTaskChecked = (task, id, isChecked) => dispatch => {\n  console.log(\"toggleSubTaskChecked\");\n\n  const newTask = _objectSpread({}, task);\n\n  newTask.subTasks = newTask.subTasks.map(subTask => {\n    const newSubTask = _objectSpread({}, subTask);\n\n    if (newSubTask.id === id) newSubTask.isChecked = isChecked;\n    return newSubTask;\n  });\n  return TodosAPI.editTask(newTask).then(data => dispatch(editTask(data)));\n};\nexport const removeSubtask = (task, id) => dispatch => {\n  const newTask = _objectSpread({}, task);\n\n  newTask.subTasks = newTask.subTasks.filter(subTask => subTask.id !== id);\n  return TodosAPI.editTask(newTask).then(data => {\n    return dispatch(editTask(data));\n  });\n};","map":{"version":3,"sources":["/home/psihoz/todo-app-back/client/src/redux/navReducer.js"],"names":["TodosAPI","ADD_TASK","REMOVE_TASK","SET_TASKS","EDIT_TASK","TOGGLE_IS_ACTIVE","initialState","tasks","state","action","type","task","newTasks","map","newTask","id","taskIdx","findIndex","filter","elem","idx","isActive","addTask","removeTask","toggleIsActive","setTasks","editTask","postTask","dispatch","console","log","postTodo","then","todo","name","subTasks","catch","err","getTasks","getAllTodos","data","deleteTask","deleteTodo","toggleTaskActive","addSubtask","label","push","isChecked","toggleSubTaskChecked","subTask","newSubTask","removeSubtask"],"mappings":"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","sourcesContent":["import TodosAPI from '../api/TodosAPI';\n\nconst ADD_TASK = 'ADD_TASK';\nconst REMOVE_TASK = 'REMOVE_TASK';\nconst SET_TASKS = 'SET_TASKS';\nconst EDIT_TASK = 'EDIT_TASK';\nconst TOGGLE_IS_ACTIVE = 'TOGGLE_IS_ACTIVE';\nconst initialState = {\n  tasks: [],\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_TASKS: {\n      return {\n        ...state,\n        tasks: action.tasks\n      };\n    }\n    case ADD_TASK: {\n      return {\n        ...state,\n        tasks: [...state.tasks, action.task],\n      };\n    }\n    case EDIT_TASK: {\n      let newTasks = [...state.tasks];\n      newTasks = newTasks.map(task => {\n        let newTask = { ...task };\n        if (newTask.id === action.task.id) {\n          newTask = action.task;\n        }\n        return newTask;\n      });\n      return {\n        ...state,\n        tasks: newTasks\n      };\n    }\n    case REMOVE_TASK: {\n      const taskIdx = state.tasks.findIndex(task => task.id === action.task.id);\n      const newTasks = [...state.tasks.filter((elem, idx) => idx !== taskIdx)];\n      return {\n        ...state,\n        tasks: newTasks\n      };\n    }\n    case TOGGLE_IS_ACTIVE: {\n      let newTasks = [...state.tasks];\n      newTasks = newTasks.map(task => {\n        let newTask = { ...task };\n        if (newTask.id === action.task.id) {\n          newTask = action.task;\n        } else {\n          newTask.isActive = false;\n        }\n        return newTask;\n      });\n      return {\n        ...state,\n        tasks: newTasks\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n\nexport const addTask = task => ({\n  type: ADD_TASK,\n  task,\n});\n\nexport const removeTask = task => ({\n  type: REMOVE_TASK,\n  task,\n});\nexport const toggleIsActive = task => ({\n  type: TOGGLE_IS_ACTIVE,\n  task,\n});\nexport const setTasks = tasks => ({\n  type: SET_TASKS,\n  tasks,\n});\n\nexport const editTask = task => ({\n  type: EDIT_TASK,\n  task,\n});\n\n// Thunks\nexport const postTask = task => dispatch => {\n  console.log(\"Post task reducer\")\n  TodosAPI.postTodo(task)\n    .then(todo => {\n      const newTask = {\n        id: todo.id,\n        name: todo.name,\n        isActive: todo.isActive,\n        subTasks: todo.subTasks,\n      };\n      return dispatch(addTask(newTask));\n    })\n    .catch(err => console.log(err));\n};\nexport const getTasks = () => dispatch => {\n  TodosAPI.getAllTodos()\n    .then(data => dispatch(setTasks(data)))\n    .catch(err => console.log(err));\n};\nexport const deleteTask = task => dispatch => {\n  TodosAPI.deleteTodo(task)\n    .then(() => dispatch(removeTask(task)))\n    .catch(err => console.log(err));\n};\n\nexport const toggleTaskActive = task => dispatch => {\n  console.log(\"toggleTaskActive reducer\")\n  const newTask = { ...task };\n  newTask.isActive = !task.isActive;\n  dispatch(toggleIsActive(newTask))\n  // // Update all todos, because I need to update isACtive in other todos\n  // TodosAPI.editTask(newTask)\n  //   .then(() => TodosAPI.getAllTodos().then(data => {\n  //     return dispatch(setTasks(data));\n  //   }),\n  //   )\n  //   .catch(err => console.log(err));\n};\n\nexport const addSubtask = (task, label) => dispatch => {\n  console.log(\"addSubtask reducer\")\n  const newTask = { ...task };\n  newTask.subTasks = [...task.subTasks];\n  newTask.subTasks.push({\n    label,\n    isChecked: false\n  });\n  return TodosAPI.editTask(newTask)\n    .then(data => {\n      return dispatch(editTask(data));\n    });\n};\n\nexport const toggleSubTaskChecked = (task, id, isChecked) => dispatch => {\n  console.log(\"toggleSubTaskChecked\")\n\n  const newTask = { ...task };\n  newTask.subTasks = newTask.subTasks.map(subTask => {\n    const newSubTask = { ...subTask };\n    if (newSubTask.id === id) newSubTask.isChecked = isChecked;\n    return newSubTask;\n  });\n  return TodosAPI.editTask(newTask)\n    .then(data => dispatch(editTask(data)));\n};\n\nexport const removeSubtask = (task, id) => dispatch => {\n  const newTask = { ...task };\n  newTask.subTasks = newTask.subTasks.filter(subTask => subTask.id !== id);\n  return TodosAPI.editTask(newTask)\n    .then(data => {\n      return dispatch(editTask(data));\n    });\n};\n\n"]},"metadata":{},"sourceType":"module"}