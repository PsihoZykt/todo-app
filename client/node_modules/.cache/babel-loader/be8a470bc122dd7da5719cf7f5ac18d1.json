{"ast":null,"code":"import _objectSpread from \"/home/psihoz/todo-app-back/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport UsersAPI from '../api/UsersAPI';\nconst SET_USER = 'SET_USER';\nconst initialState = {\n  isAuth: false,\n  currentUser: {}\n};\nexport default ((state = initialState, action) => {\n  console.log(action);\n\n  switch (action.type) {\n    case SET_USER:\n      {\n        return _objectSpread({}, state, {\n          isAuth: action.isAuth,\n          currentUser: action.user\n        });\n      }\n\n    default:\n      return state;\n  }\n});\nexport const setUserSession = user => ({\n  type: SET_USER,\n  isAuth: true,\n  user\n});\nexport const deleteUserSession = () => ({\n  type: SET_USER,\n  isAuth: false,\n  user: null\n}); // Thunks\n\nexport const login = (username, email, password) => dispatch => UsersAPI.login(username, email, password).then(res => {\n  console.log(\"LOGIN IS\" + res.user);\n  if (res.user !== null) return dispatch(setUserSession(res.user));else return dispatch(deleteUserSession());\n});\nexport const logout = () => dispatch => UsersAPI.logout().then(() => dispatch(deleteUserSession()));\nexport const createUser = (username, email, password) => dispatch => UsersAPI.createUser(username, email, password);\nexport const checkAuth = () => dispatch => UsersAPI.isAuth().then(res => {\n  console.log(\"Is auth\");\n  return dispatch(setUserSession(res.user));\n});","map":{"version":3,"sources":["/home/psihoz/todo-app-back/client/src/redux/authReducer.js"],"names":["UsersAPI","SET_USER","initialState","isAuth","currentUser","state","action","console","log","type","user","setUserSession","deleteUserSession","login","username","email","password","dispatch","then","res","logout","createUser","checkAuth"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,iBAArB;AAEA,MAAMC,QAAQ,GAAG,UAAjB;AAEA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,MAAM,EAAE,KADS;AAEjBC,EAAAA,WAAW,EAAE;AAFI,CAArB;AAKA,gBAAe,CAACC,KAAK,GAAGH,YAAT,EAAuBI,MAAvB,KAAkC;AAC7CC,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,UAAQA,MAAM,CAACG,IAAf;AACI,SAAKR,QAAL;AAAe;AACX,iCAAWI,KAAX;AAAkBF,UAAAA,MAAM,EAAEG,MAAM,CAACH,MAAjC;AAAyCC,UAAAA,WAAW,EAAEE,MAAM,CAACI;AAA7D;AACH;;AACD;AACI,aAAOL,KAAP;AALR;AAOH,CATD;AAWA,OAAO,MAAMM,cAAc,GAAGD,IAAI,KAAK;AACnCD,EAAAA,IAAI,EAAER,QAD6B;AAEnCE,EAAAA,MAAM,EAAE,IAF2B;AAGnCO,EAAAA;AAHmC,CAAL,CAA3B;AAMP,OAAO,MAAME,iBAAiB,GAAG,OAAO;AACpCH,EAAAA,IAAI,EAAER,QAD8B;AAEpCE,EAAAA,MAAM,EAAE,KAF4B;AAGpCO,EAAAA,IAAI,EAAE;AAH8B,CAAP,CAA1B,C,CAMP;;AACA,OAAO,MAAMG,KAAK,GAAG,CAACC,QAAD,EAAWC,KAAX,EAAkBC,QAAlB,KAA+BC,QAAQ,IAAIjB,QAAQ,CAACa,KAAT,CAAeC,QAAf,EAAyBC,KAAzB,EAAgCC,QAAhC,EAA0CE,IAA1C,CAAgDC,GAAD,IAAS;AACpHZ,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAaW,GAAG,CAACT,IAA7B;AACA,MAAIS,GAAG,CAACT,IAAJ,KAAa,IAAjB,EAAuB,OAAOO,QAAQ,CAACN,cAAc,CAACQ,GAAG,CAACT,IAAL,CAAf,CAAf,CAAvB,KACK,OAAOO,QAAQ,CAACL,iBAAiB,EAAlB,CAAf;AACR,CAJ+D,CAAzD;AAMP,OAAO,MAAMQ,MAAM,GAAG,MAAMH,QAAQ,IAAIjB,QAAQ,CAACoB,MAAT,GAAkBF,IAAlB,CAAuB,MAAMD,QAAQ,CAACL,iBAAiB,EAAlB,CAArC,CAAjC;AACP,OAAO,MAAMS,UAAU,GAAG,CAACP,QAAD,EAAWC,KAAX,EAAkBC,QAAlB,KAA+BC,QAAQ,IAAIjB,QAAQ,CAACqB,UAAT,CAAoBP,QAApB,EAA8BC,KAA9B,EAAqCC,QAArC,CAA9D;AACP,OAAO,MAAMM,SAAS,GAAG,MAAML,QAAQ,IAAIjB,QAAQ,CAACG,MAAT,GAAkBe,IAAlB,CAAwBC,GAAD,IAAO;AACrEZ,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA,SAAOS,QAAQ,CAACN,cAAc,CAACQ,GAAG,CAACT,IAAL,CAAf,CAAf;AACH,CAH0C,CAApC","sourcesContent":["import UsersAPI from '../api/UsersAPI';\n\nconst SET_USER = 'SET_USER';\n\nconst initialState = {\n    isAuth: false,\n    currentUser: {},\n};\n\nexport default (state = initialState, action) => {\n    console.log(action)\n    switch (action.type) {\n        case SET_USER: {\n            return {...state, isAuth: action.isAuth, currentUser: action.user};\n        }\n        default:\n            return state;\n    }\n};\n\nexport const setUserSession = user => ({\n    type: SET_USER,\n    isAuth: true,\n    user,\n});\n\nexport const deleteUserSession = () => ({\n    type: SET_USER,\n    isAuth: false,\n    user: null,\n});\n\n// Thunks\nexport const login = (username, email, password) => dispatch => UsersAPI.login(username, email, password).then((res) => {\n    console.log(\"LOGIN IS\" + res.user)\n    if (res.user !== null) return dispatch(setUserSession(res.user))\n    else return dispatch(deleteUserSession());\n});\n\nexport const logout = () => dispatch => UsersAPI.logout().then(() => dispatch(deleteUserSession()));\nexport const createUser = (username, email, password) => dispatch => UsersAPI.createUser(username, email, password);\nexport const checkAuth = () => dispatch => UsersAPI.isAuth().then((res)=>{\n    console.log(\"Is auth\")\n    return dispatch(setUserSession(res.user))\n});\n"]},"metadata":{},"sourceType":"module"}