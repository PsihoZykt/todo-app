(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){e.exports={header:"header_header__v9FKw"}},114:function(e,t,n){e.exports={content:"content_content__3j5AN"}},115:function(e,t,n){e.exports={loginWrapper:"login_loginWrapper__Rq1Yc"}},119:function(e,t,n){e.exports={removeTask:"removeTask_removeTask__1lplo"}},121:function(e,t,n){e.exports={taskBar:"taskBar_taskBar__3ldYW"}},122:function(e,t,n){e.exports={taskContent:"taskContent_taskContent__2KwZq"}},124:function(e,t,n){e.exports={registerWrapper:"register_registerWrapper__c_baJ"}},127:function(e,t,n){e.exports=n(252)},252:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(20),c=n.n(s),o=n(13),u=n(21),i=n(108),l={position:u.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:u.c.SCALE},m=n(6),d=n(25),f=n(26),p=n(8),b=n(110).create({baseURL:"http://localhost:3005"}),k={getAllTodos:function(){return b.get("/api/todo").then(function(e){return e.data}).then(function(e){return e.data.map(function(e){return{name:e.name,subTasks:e.subTasks.map(function(e){return{label:e.label,id:e._id,isChecked:e.isChecked}}),id:e._id}})})},postTodo:function(e){return b.post("/api/todo",{task:e},{headers:{"Content-Type":"application/json"}}).then(function(e){return e.data}).then(function(e){return{name:e.data.name,isActive:e.data.isActive,subTasks:e.data.subTasks.map(function(e){return{label:e.label,id:e._id,isChecked:e.isChecked}}),id:e.data._id}})},deleteTodo:function(e){return b.delete("/api/todos/".concat(e.id)).then(function(e){return e.data})},editTask:function(e){return b.put("/api/todo/".concat(e.id),{task:e},{headers:{"Content-Type":"application/json"}}).then(function(e){return e.data}).then(function(e){return{name:e.data.name,isActive:e.data.isActive,subTasks:e.data.subTasks.map(function(e){return{label:e.label,id:e._id,isChecked:e.isChecked}}),id:e.data._id}})}},h={tasks:[]},E=function(e){return{type:"SET_TASKS",tasks:e}},v=function(e){return{type:"EDIT_TASK",task:e}},T=function(){return function(e){k.getAllTodos().then(function(t){return e(E(t))}).catch(function(e){return console.log(e)})}},g={createUser:function(e,t,n){var a={username:e,email:t,password:n};return console.log(a),b.post("/api/user/register",a).catch(function(e){throw e.response.data})},login:function(e,t,n){var a={email:t,username:e,password:n};return console.log(a),b.post("/api/user/login",a).then(function(e){return e.data}).catch(function(e){throw e.response.data})},logout:function(){return b.delete("/api/user/logout").then(function(e){return e.data})},isAuth:function(){return b.get("/api/user/auth").then(function(e){return e.data}).catch(function(e){return e.response.data})}},_={isAuth:!1,currentUser:{}},A=function(e){return{type:"SET_USER",isAuth:!0,user:e}},O=function(){return function(e){return g.isAuth().then(function(t){return null!==t.user?e(A(t.user)):e({type:"SET_USER",isAuth:!1,user:null})})}},j=n(111),S=n.n(j),y=n(255),N=n(256),w=function(e){return r.a.createElement("span",{tabIndex:0,role:"button",onClick:e.onLogout},"Logout")},C=Object(m.b)(null,{logout:function(){return function(e){return g.logout().then(function(){return e({type:"SET_USER",isAuth:!1,user:null})})}},clearTasks:function(){return function(e){e({type:"CLEAR_TASKS"})}}})(Object(d.e)(function(e){return r.a.createElement(w,Object.assign({onLogout:function(){e.logout(),e.clearTasks()}},e))})),x=n(55),U=n.n(x);var R=function(e){var t=e.isAuth;e.history;return r.a.createElement("div",null,!t&&r.a.createElement("span",{tabIndex:0,role:"link"},"login"))},F=function(e){var t=e.isAuth;e.history;return r.a.createElement("div",null,!t&&r.a.createElement("span",{tabIndex:0,role:"link"},"Registration"))},B=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col"},r.a.createElement(I,{initialValues:{searchField:""},s:!0})),r.a.createElement("div",{className:"col"},r.a.createElement(o.b,{to:"/tasks",className:U.a.currentUser}," ","current user is ".concat(e.currentUser.username," "))),r.a.createElement("div",{className:"col"},r.a.createElement("span",{className:U.a.logout},r.a.createElement(C,{logout:e.logout,clearTasks:e.clearTasks}))))},I=Object(y.a)({form:"searchTask"})(function(e){return r.a.createElement("span",null,r.a.createElement(N.a,{className:"form-control ".concat(U.a.searchForm),component:"input",name:"searchField",placeholder:"searchTask"}))}),L=function(e){var t=e.isAuth,n=e.currentUser,a=e.history,s=e.logout,c=e.location;return r.a.createElement(r.a.Fragment,null,t&&n&&r.a.createElement(B,{clearTasks:e.clearTasks,location:c,currentUser:n,logout:s}),r.a.createElement(d.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(R,{isAuth:t,history:a})}}),r.a.createElement(d.a,{exact:!0,path:"/register",render:function(){return r.a.createElement(F,{isAuth:t,history:a})}}))},W=Object(d.e)(Object(m.b)(function(e){return{isAuth:e.authReducer.isAuth,currentUser:e.authReducer.currentUser}},{setTasks:E,getTasks:T,checkAuth:O,setUserSession:A})(function(e){var t=e.isAuth,n=e.currentUser,a=e.history;return r.a.createElement("div",{className:"row ".concat(S.a.header)},r.a.createElement(L,Object.assign({isAuth:t,currentUser:n,history:a},e)))})),K=n(114),P=n.n(K),D=function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inputEmail"},"Email"),r.a.createElement(N.a,{component:"input",name:"email",placeholder:"email",className:"form-control",id:"inputEmail"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inputPassword"},"Password"),r.a.createElement(N.a,{component:"input",placeholder:"password",name:"password",type:"password",className:"form-control",id:"inputPassword"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign in"))},V=D=Object(y.a)({form:"login"})(D),G=n(115),M=n.n(G),q=function(e){return r.a.createElement("div",{className:"".concat(M.a.loginWrapper)},r.a.createElement(V,{onSubmit:e.onSubmit}),r.a.createElement(J,{history:e.history}))},J=function(e){return r.a.createElement("div",{tabIndex:0,role:"button",onClick:function(){return e.history.push("/register")}},"Not register yet? Register now!")},Y=Object(m.b)(null,{login:function(e,t,n){return function(a){return g.login(e,t,n).then(function(e){return console.log(e),a(A(e.user)),e}).catch(function(e){return e})}}})(Object(d.e)(function(e){var t=Object(u.d)();return r.a.createElement(q,Object.assign({onSubmit:function(n){n.username;var a=n.email,r=n.password;e.login("",a,r).then(function(n){n.user?(t.success(n.message),e.history.push("/tasks")):t.error(n.message)}).catch(function(e){t.error(e)})}},e))})),Z=function(e){return{isAuth:e.authReducer.isAuth}},Q=function(e){return Object(m.b)(Z,{checkAuth:O})(function(t){return Object(a.useEffect)(function(){t.checkAuth()},[t.isAuth]),t.isAuth?r.a.createElement(e,t):r.a.createElement(Y,null)})},z=n(54),H=n(258),X=n(116),$=n(117),ee=n(125),te=n(118),ne=n(126),ae=n(119),re=n.n(ae),se=function(e){function t(){var e,n;Object(X.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).onTaskRemoved=n.props,n.onRemoveButtonClicked=function(e){(0,n.props.onTaskRemoved)(e)},n}return Object(ne.a)(t,e),Object($.a)(t,[{key:"componentWillUnmount",value:function(){this.props.history.push("/tasks")}},{key:"render",value:function(){var e=this;return r.a.createElement("i",{onClick:function(){e.onRemoveButtonClicked(e.props.task)},className:"fa fa-times ".concat(re.a.removeTask)})}}]),t}(r.a.Component),ce=Object(d.e)(se),oe=n(34),ue=n.n(oe),ie=function(e){return"nav-link ".concat(ue.a.task," ").concat(function(e){var t=!0;return e.forEach(function(e){e.isChecked||(t=!1)}),t}(e.subTasks)?"".concat(ue.a.done):"".concat(ue.a.undoneTask))},le=function(e){var t=e.task,n=e.onTaskClick,a=e.onTaskRemoved;return console.log(e),r.a.createElement("div",{className:ue.a.wrapper},r.a.createElement("li",null,r.a.createElement("div",{className:"nav-item"},r.a.createElement(o.b,{isActive:function(){return t.isActive},className:ie(t),to:"/tasks/id/".concat(t.id),onClick:function(){return n(t)}},t.name,r.a.createElement(ce,{task:t,onTaskRemoved:a})))))},me=n(51),de=n(120),fe=n.n(de),pe=function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];return e.map(function(e){var n=fe()(t).toLowerCase(),s=Object(me.a)({},n,Object(p.a)({},e));return r.a.createElement(t,Object.assign({key:e.id},s),a)})},be=n(57),ke=n.n(be),he=Object(y.a)({form:"addTask"})(function(e){var t=e.handleSubmit;return r.a.createElement("form",{className:"form-inline input-group mb-3",onSubmit:t},r.a.createElement(N.a,{component:"input",className:"form-control",placeholder:"Task name",required:!0,"aria-label":"Task name","aria-describedby":"basic-addon2",name:"newTaskBody"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"submit",className:ke.a.invisibleButton},r.a.createElement("span",{className:"input-group-text ".concat(ke.a.addonInForm),id:"basic-addon2"},r.a.createElement("i",{className:"fa fa-check-circle-o"})))))}),Ee=function(e){var t=e.onTaskAdded;return r.a.createElement("div",{className:"input-group mb-3 wrapper ".concat(ke.a.wrapper)},r.a.createElement(he,{onSubmit:function(e){var n=e.newTaskBody;t({name:n})}}))},ve=n(121),Te=n.n(ve),ge=function(e){var t=e.taskElements,n=e.onTaskAdded;return r.a.createElement("div",{className:"col-sm-4 ".concat(Te.a.taskBar)},r.a.createElement("ul",{className:"nav nav-pills flex-column"},r.a.createElement(Ee,{onTaskAdded:n}),t))},_e=Y,Ae=Object(H.a)("searchTask"),Oe=Object(m.b)(function(e){return{isAuth:e.authReducer.isAuth,searchField:Ae(e,"searchField")}},{toggleTaskActive:function(e){return function(t){var n=Object(p.a)({},e);n.isActive=!e.isActive,t(function(e){return{type:"TOGGLE_IS_ACTIVE",task:e}}(n))}},postTask:function(e){return function(t){k.postTodo(e).then(function(e){var n={id:e.id,name:e.name,isActive:e.isActive,subTasks:e.subTasks};return t({type:"ADD_TASK",task:n})}).catch(function(e){return console.log(e)})}},deleteTask:function(e){return function(t){k.deleteTodo(e).then(function(){return t(function(e){return{type:"REMOVE_TASK",task:e}}(e))}).catch(function(e){return console.log(e)})}}})(Object(d.e)(function(e){var t=e.tasks,n=Object(a.useState)(Object(f.a)(t)),s=Object(z.a)(n,2),c=s[0],o=s[1];Object(a.useEffect)(function(){if(!t)return r.a.createElement(_e,null);var n="";e.searchField&&(n=e.searchField),o(t.filter(function(e){return-1!==e.name.search(n)}))},[e.tasks]),console.log(c);var u=function(t){return e.toggleTaskActive(t)},i=function(t){return e.deleteTask(t)},l=c.map(function(e){return r.a.createElement(le,{task:e,key:e.id,onTaskClick:u,onTaskRemoved:i})});return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{taskElements:l,onTaskAdded:function(t){return e.postTask(t)}})," ")})),je=n(40),Se=n.n(je),ye=function(e){var t=e.subtask,n=t.label,a=t.id,s=t.isChecked,c=e.children,o=Object(z.a)(c,3),u=o[0],i=o[1],l=o[2];return r.a.createElement("span",{className:"".concat(Se.a.subTask," list-group-item  d-flex justify-content-between align-items-center\n      ")},r.a.createElement("span",{onClick:function(){return i(u,a,!s)},className:"".concat(Se.a.subTaskLabel," ").concat(s?"".concat(Se.a.checked):"")}," ",n),r.a.createElement("i",{role:"button",tabIndex:0,onClick:function(){return l(u,a)},className:"fa fa-times ".concat(Se.a.removeButton)}))},Ne=function(e){var t=e.subTasks.length,n=0;return e.subTasks.forEach(function(e){e.isChecked||n++}),t-n},we=function(e){return 0===e.subTasks.length?0:Ne(e)/e.subTasks.length*100},Ce=function(e){var t=e.task;if(!t)return r.a.createElement(r.a.Fragment,null);console.log(we(t));var n={width:"".concat(we(t),"%")},a={color:"".concat(0===we(t)?"#007bff":"white"),padding:"10px"};return r.a.createElement("div",null,r.a.createElement("div",{style:{height:"2em",margin:"10px"},className:"progress"},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:n,"aria-valuenow":we(t),"aria-valuemin":"0","aria-valuemax":"100"},r.a.createElement("span",{style:a},"  ".concat(Ne(t),"  from ").concat(t.subTasks.length,"   is done")))))},xe=n(122),Ue=n.n(xe),Re=n(58),Fe=n.n(Re),Be=function(e){var t=e.onSubtaskAdded,n=e.task;return r.a.createElement("div",{className:Fe.a.inputWrapper},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement(Ie,{onSubmit:function(e){t(n,e.label)}})))},Ie=Object(y.a)({form:"addSubTask"})(function(e){var t=e.handleSubmit;return r.a.createElement("form",{className:"form-inline input-group mb-3",onSubmit:t},r.a.createElement(N.a,{component:"input",type:"text",name:"label",required:!0,className:"form-control",placeholder:"SubTask name","aria-label":"SubTask name","aria-describedby":"basic-addon2"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"submit",className:Fe.a.invisibleButton},r.a.createElement("span",{className:"input-group-text ".concat(Fe.a.addonInForm),id:"basic-addon2"},r.a.createElement("i",{className:"fa fa-check-circle-o"})))))}),Le=Be,We=function(e){var t=e.task,n=e.subTasks,a=e.onSubtaskAdded;return r.a.createElement("div",{className:"col-sm-8 ".concat(Ue.a.taskContent)},r.a.createElement(Le,{task:t,onSubtaskAdded:a}),r.a.createElement("ul",{className:"list-group"},n),r.a.createElement(Ce,{task:t}))},Ke=Object(m.b)(null,{addSubtask:function(e,t){return function(n){var a=Object(p.a)({},e);return a.subTasks=Object(f.a)(e.subTasks),a.subTasks.push({label:t,isChecked:!1}),k.editTask(a).then(function(e){return n(v(e))})}},toggleSubTaskChecked:function(e,t,n){return function(a){var r=Object(p.a)({},e);return r.subTasks=r.subTasks.map(function(e){var a=Object(p.a)({},e);return a.id===t&&(a.isChecked=n),a}),k.editTask(r).then(function(e){return a(v(e))})}},removeSubtask:function(e,t){return function(n){var a=Object(p.a)({},e);return a.subTasks=a.subTasks.filter(function(e){return e.id!==t}),k.editTask(a).then(function(e){return n(v(e))})}}})(Object(d.e)(function(e){var t=e.tasks,n=e.match.params.id,a=t.find(function(e){return e.id===n});if(n&&a){var s=pe(a.subTasks,ye,a,function(t,n,a){return e.toggleSubTaskChecked(t,n,a)},function(t,n){e.removeSubtask(t,n)});return r.a.createElement(We,{task:a,subTasks:s,onSubtaskAdded:function(t,n){e.addSubtask(t,n)}})}return null})),Pe=Q(Object(d.e)(Object(m.b)(function(e){return{isAuth:e.authReducer.isAuth,tasks:e.navReducer.tasks}},{getTasks:T})(function(e){return Object(a.useEffect)(function(){console.log(e),e.isAuth&&e.getTasks()},[e.isAuth]),r.a.createElement("div",{className:"row ".concat(P.a.content)},r.a.createElement(Oe,{tasks:e.tasks}),r.a.createElement(d.a,{path:["/tasks/id/:id?","/"],render:function(){return r.a.createElement(Ke,{tasks:e.tasks})}}))}))),De=n(7),Ve=n(257),Ge=n(123),Me=Object(De.c)({navReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TASKS":return Object(p.a)({},e,{tasks:t.tasks});case"ADD_TASK":return Object(p.a)({},e,{tasks:[].concat(Object(f.a)(e.tasks),[t.task])});case"EDIT_TASK":var n=Object(f.a)(e.tasks);return n=n.map(function(e){var n=Object(p.a)({},e);return n.id===t.task.id&&(n=t.task),n}),Object(p.a)({},e,{tasks:n});case"REMOVE_TASK":var a=e.tasks.findIndex(function(e){return e.id===t.task.id}),r=Object(f.a)(e.tasks.filter(function(e,t){return t!==a}));return Object(p.a)({},e,{tasks:r});case"TOGGLE_IS_ACTIVE":var s=Object(f.a)(e.tasks);return s=s.map(function(e){var n=Object(p.a)({},e);return n.id===t.task.id?n=t.task:n.isActive=!1,n}),Object(p.a)({},e,{tasks:s});case"CLEAR_TASKS":return Object(p.a)({},e,{tasks:[]});default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return e.isAuth===t.isAuth&&e.currentUser&&e.currentUser.isAuth&&e.currentUser.id===t.user.id&&e.currentUser.email===t.user.email&&e.currentUser.username===t.user.username?Object(p.a)({},e):Object(p.a)({},e,{isAuth:t.isAuth,currentUser:t.user});default:return e}},form:Ve.a}),qe=Object(De.d)(Me,Object(De.a)(Ge.a));window.store=qe;var Je=qe,Ye=n(124),Ze=n.n(Ye),Qe=Object(y.a)({form:"register"})(function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inputEmail"},"Username"),r.a.createElement(N.a,{component:"input",name:"email",placeholder:"email",className:"form-control",id:"inputEmail"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inputUsername"},"Username"),r.a.createElement(N.a,{component:"input",placeholder:"username",name:"username",className:"form-control",id:"inputUsername"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inputPassword"},"Password"),r.a.createElement(N.a,{component:"input",placeholder:"password",name:"password",type:"password",className:"form-control",id:"inputPassword"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Register"))}),ze=function(e){return r.a.createElement("div",{className:"".concat(Ze.a.registerWrapper)},"register",r.a.createElement(Qe,{onSubmit:e.onSubmit}),r.a.createElement("span",{role:"link",tabIndex:0,onClick:function(){return e.history.push("/login")}},"back to login"," "))},He=Object(m.b)(null,{createUser:function(e,t,n){return function(a){return g.createUser(e,t,n).then(function(r){return g.login(e,t,n).then(function(e){return null!==e.user?a(A(e.user)):a({type:"SET_USER",isAuth:!1,user:null}),e})}).catch(function(e){return e})}}})(Object(d.e)(function(e){var t=Object(u.d)();return r.a.createElement(ze,Object.assign({onSubmit:function(n){e.createUser(n.username,n.email,n.password).then(function(n){console.log(n),n.user?(t.success(n.message),e.history.push("/")):t.error(n.message)})}},e))})),Xe=function(){return r.a.createElement(m.a,{store:Je},r.a.createElement("div",{className:"container-fluid"},r.a.createElement(W,null),r.a.createElement(d.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(Y,null)}}),r.a.createElement(d.a,{exact:!0,path:"/register",render:function(){return r.a.createElement(He,null)}}),r.a.createElement(d.a,{path:"/tasks",render:function(){return r.a.createElement(Pe,null)}}),r.a.createElement(d.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Pe,null)}})))};c.a.render(r.a.createElement(o.a,null,r.a.createElement(u.a,Object.assign({template:i.a},l),r.a.createElement(Xe,null))),document.getElementById("root"))},34:function(e,t,n){e.exports={wrapper:"task_wrapper___yQ9s",undoneTask:"task_undoneTask__1BrlC",done:"task_done__1hx9B",task:"task_task__3r3Z1"}},40:function(e,t,n){e.exports={checked:"subTask_checked__3Ej7B",subTask:"subTask_subTask__38UwJ",removeButton:"subTask_removeButton__1U7Cf",subTaskLabel:"subTask_subTaskLabel__2T_79"}},55:function(e,t,n){e.exports={currentUser:"headerLabel_currentUser__3Gsaj",logout:"headerLabel_logout__1CbYZ",searchForm:"headerLabel_searchForm__PVOxx",searchWrapper:"headerLabel_searchWrapper__1brLr"}},57:function(e,t,n){e.exports={invisibleButton:"addTask_invisibleButton__iEfMB",addonInForm:"addTask_addonInForm__WxAna",wrapper:"addTask_wrapper__tR-g8"}},58:function(e,t,n){e.exports={inputWrapper:"addSubTask_inputWrapper__31e_M",invisibleButton:"addSubTask_invisibleButton__2A19b",addonInForm:"addSubTask_addonInForm__3T6L2"}}},[[127,1,2]]]);
//# sourceMappingURL=main.9ba306da.chunk.js.map